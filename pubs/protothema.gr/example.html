<head>
<script>
    var googletag = googletag || {};
	googletag.cmd = googletag.cmd || [];
    var adContext = {"RootCategory":"P1","Category":null,"Tag":null,"Article":null,"Page":"Πρώτο Θέμα - ειδήσεις από την Ελλάδα και όλο τον κόσμο - Έκτακτη επικαιρότητα","IsCategory":false};

    googletag.cmd.push(function () {
        var pubads = googletag.pubads();
        pubads.collapseEmptyDivs(true);

        for (var key in adContext) {
            pubads.setTargeting(key, adContext[key]);
        }
        googletag.pubads().enableLazyLoad({
            fetchMarginPercent: 400,
            renderMarginPercent: 200,
            mobileScaling: 2,
        });
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
    });

</script>
</head>

<body>
    <div id="banner-div-9fa2b705-a7e0-4910-874f-5025535f3ab9" class="banner-container b728x90">

    </div>
    <script type="text/javascript">
        googletag.cmd.push(function () {

            var definedSlot;
            var code = "/1050137/Homepage_Horizontal_Carousel";
            var size = [[728,90],[970,90],[970,200],[970,250]];
            var divId = "banner-div-9fa2b705-a7e0-4910-874f-5025535f3ab9";
            var sizes = [{"ScreenWidth":0,"ScreenHeight":0,"BannerWidth":null,"BannerHeight":null},{"ScreenWidth":1024,"ScreenHeight":500,"BannerWidth":728,"BannerHeight":90},{"ScreenWidth":1280,"ScreenHeight":500,"BannerWidth":970,"BannerHeight":90},{"ScreenWidth":1280,"ScreenHeight":500,"BannerWidth":970,"BannerHeight":200},{"ScreenWidth":1280,"ScreenHeight":500,"BannerWidth":970,"BannerHeight":250},{"ScreenWidth":1280,"ScreenHeight":500,"BannerWidth":1,"BannerHeight":1},{"ScreenWidth":1280,"ScreenHeight":500,"BannerWidth":728,"BannerHeight":90}];

            var refreshIntervalInSec = 0;
            var autoRefresh = refreshIntervalInSec > 30 ? true : false;
            var REFRESH_KEY = 'refreshOnView';
            var REFRESH_VALUE = autoRefresh ? 'yes' : 'no';

			if (sizes) {
                definedSlot = googletag.defineSlot(code, size, divId)
                    .setTargeting(REFRESH_KEY, REFRESH_VALUE)
                    .addService(googletag.pubads())
                    .defineSizeMapping(getSizeMapping(googletag, sizes));
            }
            else {
                definedSlot = googletag.defineSlot(code, size, divId)
                    .setTargeting(REFRESH_KEY, REFRESH_VALUE)
                    .addService(googletag.pubads());
            }

            if (autoRefresh) {
                console.log(`refresh of ${code} registered. Will trigger once in viewport `)
                googletag.pubads().addEventListener('impressionViewable', function (event) {
                    if (event.slot === definedSlot) {
                        console.log(event.slot, event.slot.getSlotElementId())
                        if ((event.slot.getTargeting(REFRESH_KEY) || '').indexOf('yes') > -1) {
                            console.log(`${code} viewable. Refreshing in ${refreshIntervalInSec} seconds. `, event.slot.getTargeting(REFRESH_KEY))
                            setTimeout(function () {
                                definedSlot.clearTargeting(REFRESH_KEY);
                                console.log('refreshing', code, definedSlot.getTargeting(REFRESH_KEY))
                                googletag.pubads().refresh([definedSlot]);
                                console.log('refreshed', code, definedSlot.getTargeting(REFRESH_KEY))
                            }, refreshIntervalInSec * 1000);
                        } else {
                            console.log(`refresh of ${code} ignored. Already refreshed. `, event.slot.getTargeting(REFRESH_KEY))
                        }
                    }
                });
            } else {
                console.log(`refresh of ${code} ignored. `)
            }
        });

        setTimeout(() => {
            googletag.cmd.push(function () {
                googletag.display("banner-div-9fa2b705-a7e0-4910-874f-5025535f3ab9");
            })
        }, 1000);
    </script>

    </div>
</body>